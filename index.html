<html>
    <head>
        <title>Firebase Quiz Form</title>
        <link rel="stylesheet" href="style.css">
    </head>
    <body>
        <div class="box">
            <div class="form">
                <h2>SDC Quiz</h2> <!-- Form title -->
                <form>
                    <div class="inputbox">
                        <input type="text" value="" id="username" required>
                        <span>Username</span>
                    </div>
                    <div class="inputbox">
                        <input type="text" value="" id="section" required> <!-- Section field -->
                        <span>Section</span>
                    </div>
                    <div class="inputbox">
                        <input type="text" value="" id="semester" required> <!-- Semester field -->
                        <span>Semester</span>
                    </div>
                    <input type="submit" value="Submit" class="sub" id="submit">
                </form>
            </div>
        </div>

        <script type="module">
            // Import Firebase SDKs
            import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
            import { getDatabase, ref, update } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-database.js";
            import { getAnalytics } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-analytics.js";

            // Firebase configuration (Replace with your credentials if needed)
            const firebaseConfig = {
                apiKey: "AIzaSyCXUOurYSr1T7hgio8L2JF_-3Odg8vutUg",
                authDomain: "quiz-fb5d9.firebaseapp.com",
                projectId: "quiz-fb5d9",
                storageBucket: "quiz-fb5d9.appspot.com",
                messagingSenderId: "916039221761",
                appId: "1:916039221761:web:df2104737062375b3ff600",
                measurementId: "G-BPTGDJXS8K"
            };

            // Initialize Firebase
            const app = initializeApp(firebaseConfig);
            const analytics = getAnalytics(app);
            const db = getDatabase(app); // Initialize Realtime Database

            // Form submission event listener
            document.getElementById("submit").addEventListener('click', function(e) {
                e.preventDefault(); // Prevents page reload

                // Get input values
                const username = document.getElementById("username").value;
                const section = document.getElementById("section").value;
                const semester = document.getElementById("semester").value;

                // Data to be saved, including the result field with an initial value of 0
                const userData = {
                    username: username,
                    section: section,
                    semester: semester,
                    result: 0 // Initialize result field
                };

                // Save the data using update() to prevent overwriting
                update(ref(db, 'user/' + username), userData)
                    .then(() => {
                        console.log("Data saved successfully:", userData); // Success confirmation
                        alert("Submission Successful!"); // Notify user
                    })
                    .catch((error) => {
                        console.error("Error saving data:", error); // Handle any errors
                    });
            });
        </script>
    </body>
</html>
