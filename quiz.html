<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz</title>
    <style>
        body { font-family: Arial, sans-serif; }
        #quiz-container { display: none; }
        #result-container { display: none; }
    </style>
</head>
<body>
    <h1>Welcome to the Quiz!</h1>
    <div id="name-container">
        <input type="text" id="student-name" placeholder="Enter your name" required>
        <button id="start-quiz">Start Quiz</button>
    </div>
    
    <div id="quiz-container">
        <h2 id="question"></h2>
        <div id="answers"></div>
        <button id="next-button">Next Question</button>
        <p id="timer"></p>
    </div>
    
    <div id="result-container">
        <h2>Results</h2>
        <p id="result"></p>
        <p id="total-time"></p>
    </div>

    <script>
        let questions = [];
        let currentQuestionIndex = 0;
        let score = 0;
        let startTime;

        // Fetch questions from the JSON file
        fetch('questions.json')
            .then(response => response.json())
            .then(data => {
                questions = data;
            })
            .catch(error => console.error('Error loading questions:', error));

        document.getElementById('start-quiz').onclick = function() {
            const name = document.getElementById('student-name').value;
            if (!name) {
                alert('Please enter your name to start the quiz.');
                return;
            }
            document.getElementById('name-container').style.display = 'none';
            document.getElementById('quiz-container').style.display = 'block';
            startQuiz();
        };

        function startQuiz() {
            currentQuestionIndex = 0;
            score = 0;
            startTime = new Date().getTime();
            showQuestion();
        }

        function showQuestion() {
            if (currentQuestionIndex < questions.length) {
                const question = questions[currentQuestionIndex];
                document.getElementById('question').innerText = question.question;
                const answersContainer = document.getElementById('answers');
                answersContainer.innerHTML = '';

                question.answers.forEach((answer, index) => {
                    const answerButton = document.createElement('button');
                    answerButton.innerText = answer;
                    answerButton.onclick = function() {
                        if (answer === question.correctAnswer) {
                            score++;
                        }
                        currentQuestionIndex++;
                        showQuestion();
                    };
                    answersContainer.appendChild(answerButton);
                });

                // Start the timer for each question
                startTimer(40);
            } else {
                endQuiz();
            }
        }

        function startTimer(duration) {
            let timer = duration, minutes, seconds;
            const timerDisplay = document.getElementById('timer');

            const interval = setInterval(() => {
                minutes = parseInt(timer / 60, 10);
                seconds = parseInt(timer % 60, 10);
                timerDisplay.innerText = `Time left: ${seconds} seconds`;

                if (--timer < 0) {
                    clearInterval(interval);
                    currentQuestionIndex++;
                    showQuestion();
                }
            }, 1000);
        }

        function endQuiz() {
            const endTime = new Date().getTime();
            const totalTime = endTime - startTime;
            document.getElementById('quiz-container').style.display = 'none';
            document.getElementById('result-container').style.display = 'block';
            document.getElementById('result').innerText = `Score: ${score} out of ${questions.length}`;
            document.getElementById('total-time').innerText = `Total time taken: ${Math.floor(totalTime / 1000)} seconds`;
        }
    </script>
</body>
</html>
